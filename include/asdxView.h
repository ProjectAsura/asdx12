//-----------------------------------------------------------------------------
// File : asdxView.h
// Desc : View Object.
// Copyright(c) Project Asura. All right reserved
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include <d3d12.h>
#include <asdxRef.h>


namespace asdx {

///////////////////////////////////////////////////////////////////////////////
// IView interface
///////////////////////////////////////////////////////////////////////////////
struct IView : public IReference
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      CPUディスクリプタハンドルを取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_CPU_DESCRIPTOR_HANDLE GetHandleCPU() const = 0;

    //-------------------------------------------------------------------------
    //! @brief      GPUディスクリプタハンドルを取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_GPU_DESCRIPTOR_HANDLE GetHandleGPU() const = 0;

    //-------------------------------------------------------------------------
    //! @brief      リソースを取得します.
    //-------------------------------------------------------------------------
    virtual ID3D12Resource* GetResource() const = 0;
};

///////////////////////////////////////////////////////////////////////////////
// IConstantBufferView interface
///////////////////////////////////////////////////////////////////////////////
struct IConstantBufferView : public IView
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IConstantBufferView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      構成設定を取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_CONSTANT_BUFFER_VIEW_DESC GetDesc() const = 0;
};

///////////////////////////////////////////////////////////////////////////////
// IRenderTargetView interface
///////////////////////////////////////////////////////////////////////////////
struct IRenderTargetView : public IView
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IRenderTargetView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      構成設定を取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_RENDER_TARGET_VIEW_DESC GetDesc() const = 0;
};

///////////////////////////////////////////////////////////////////////////////
// IDepthStencilView interface
///////////////////////////////////////////////////////////////////////////////
struct IDepthStencilView : public IView
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IDepthStencilView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      構成設定を取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_DEPTH_STENCIL_VIEW_DESC GetDesc() const = 0;
};

///////////////////////////////////////////////////////////////////////////////
// IShaderResourceView interface
///////////////////////////////////////////////////////////////////////////////
struct IShaderResourceView : public IView
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IShaderResourceView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      構成設定を取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_SHADER_RESOURCE_VIEW_DESC GetDesc() const = 0;
};

///////////////////////////////////////////////////////////////////////////////
// IUnorderedAccessView interface
///////////////////////////////////////////////////////////////////////////////
struct IUnorderedAccessView : public IView
{
    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    virtual ~IUnorderedAccessView()
    { /* DO_NOTHING */ }

    //-------------------------------------------------------------------------
    //! @brief      構成設定を取得します.
    //-------------------------------------------------------------------------
    virtual D3D12_UNORDERED_ACCESS_VIEW_DESC GetDesc() const = 0;

    //-------------------------------------------------------------------------
    //! @brief      カウンターリソースを取得します.
    //-------------------------------------------------------------------------
    virtual ID3D12Resource* GetCounterResource() const = 0;
};

//-----------------------------------------------------------------------------
//! @brief      定数バッファビューを生成します.
//-----------------------------------------------------------------------------
bool CreateConstantBufferView(
    ID3D12Resource*                         pResource,
    const D3D12_CONSTANT_BUFFER_VIEW_DESC*  pDesc,
    IConstantBufferView**                   ppView);

//-----------------------------------------------------------------------------
//! @brief      レンダーターゲットビューを生成します.
//-----------------------------------------------------------------------------
bool CreateRenderTargetView(
    ID3D12Resource*                         pResource,
    const D3D12_RENDER_TARGET_VIEW_DESC*    pDesc,
    IRenderTargetView**                     ppView);

//-----------------------------------------------------------------------------
//! @brief      深度ステンシルビューを生成します.
//-----------------------------------------------------------------------------
bool CreateDepthStencilView(
    ID3D12Resource*                         pResource,
    const D3D12_DEPTH_STENCIL_VIEW_DESC*    pDesc,
    IDepthStencilView**                     ppView);

//-----------------------------------------------------------------------------
//! @brief      シェーダリソースビューを生成します.
//-----------------------------------------------------------------------------
bool CreateShaderResourceView(
    ID3D12Resource*                         pResource,
    const D3D12_SHADER_RESOURCE_VIEW_DESC*  pDesc,
    IShaderResourceView**                   ppView);

//-----------------------------------------------------------------------------
//! @brief      アンオーダードアクセスビューを生成します.
//-----------------------------------------------------------------------------
bool CreateUnorderedAccessView(
    ID3D12Resource*                         pResource,
    ID3D12Resource*                         pCounterResource,
    const D3D12_UNORDERED_ACCESS_VIEW_DESC* pDesc,
    IUnorderedAccessView**                  ppView);

} // namespace asdx