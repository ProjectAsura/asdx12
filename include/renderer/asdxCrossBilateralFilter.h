//-----------------------------------------------------------------------------
// File : asdxCrossBilateralFilter.h
// Desc : Cross Bilateral Filter.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include <asdxPipelineState.h>
#include <asdxRootSignature.h>
#include <asdxConstantBuffer.h>
#include <asdxView.h>


namespace asdx {

///////////////////////////////////////////////////////////////////////////////
// CrossBilateralFilter class
///////////////////////////////////////////////////////////////////////////////
class CrossBilateralFilter
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    ///////////////////////////////////////////////////////////////////////////
    // Param structure
    ///////////////////////////////////////////////////////////////////////////
    struct Param
    {
        float   Sharpness;
    };

    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    CrossBilateralFilter() = default;

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    ~CrossBilateralFilter();

    //-------------------------------------------------------------------------
    //! @brief      初期化処理を行います.
    //-------------------------------------------------------------------------
    bool Init();

    //-------------------------------------------------------------------------
    //! @brief      終了処理を行います.
    //-------------------------------------------------------------------------
    void Term();

    //-------------------------------------------------------------------------
    //! @brief      描画処理を行います.
    //! 
    //! @param[in]      pCmdList        コマンドリストです.
    //! @param[in]      pUAV            出力先データです.
    //! @param[in]      pSRV            入力データです.
    //-------------------------------------------------------------------------
    void Draw(
        ID3D12GraphicsCommandList6* pCmdList,
        IUnorderedAccessView*       pUAV,
        IShaderResourceView*        pSRV);

private:
    //=========================================================================
    // private variables.
    //=========================================================================
    PipelineState   m_PSO;
    RootSignature   m_RootSig;
    ConstantBuffer  m_CBX;
    ConstantBuffer  m_CBY;
    Param           m_Param;

    //=========================================================================
    // private methods.
    //=========================================================================
    /* NOTHING */
};

} // namespace asdx