//-----------------------------------------------------------------------------
// File : asdxColorFilter.h
// Desc : Color Filter Pass.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
// Includes
//-----------------------------------------------------------------------------
#include <asdxPassGraph.h>
#include <asdxPipelineState.h>
#include <asdxRootSignature.h>
#include <asdxConstantBuffer.h>


namespace asdx {

///////////////////////////////////////////////////////////////////////////////
// ColorFilter
///////////////////////////////////////////////////////////////////////////////
class ColorFilter
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    ///////////////////////////////////////////////////////////////////////////
    // Param structure
    ///////////////////////////////////////////////////////////////////////////
    struct Param
    {
        bool    Enable;
        float   Brightness;
        float   Saturation;
        float   Contrast;
        float   Hue;
        float   SepiaTone;
        float   GrayScale;
    };

    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    ColorFilter();

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    ~ColorFilter();

    //-------------------------------------------------------------------------
    //! @brief      初期化処理を行います.
    //-------------------------------------------------------------------------
    bool Init();

    //-------------------------------------------------------------------------
    //! @brief      終了処理を行います.
    //-------------------------------------------------------------------------
    void Term();

    //-------------------------------------------------------------------------
    //! @brief      パスグラフビルド時の処理です.
    //-------------------------------------------------------------------------
    PassResource* OnBuild(IPassGraph* graph, PassResource* input);

    //-------------------------------------------------------------------------
    //! @brief      パラメータを取得します.
    //-------------------------------------------------------------------------
    Param& GetParam();

private:
    //=========================================================================
    // private variables.
    //=========================================================================
    PipelineState       m_PSO;
    RootSignature       m_RootSig;
    ConstantBuffer      m_CB;
    Param               m_Param;
    PassResource*       m_Input;
    PassResource*       m_Output;

    //=========================================================================
    // private methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      描画処理です.
    //-------------------------------------------------------------------------
    void Draw(IPassGraphContext* context);
};

} // namespace asdx