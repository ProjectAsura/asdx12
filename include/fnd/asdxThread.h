//-----------------------------------------------------------------------------
// File : asdxThread.h
// Desc : Thread.
// Copyright(c) Project Asura. All right reserved.
//-----------------------------------------------------------------------------
#pragma once


namespace asdx {

using ThreadFunc = unsigned long(*)(void* user);

///////////////////////////////////////////////////////////////////////////////
// Thread class
///////////////////////////////////////////////////////////////////////////////
class Thread
{
    //=========================================================================
    // list of friend classes and methods.
    //=========================================================================
    /* NOTHING */

public:
    //=========================================================================
    // public variables.
    //=========================================================================
    /* NOTHING */

    //=========================================================================
    // public methods.
    //=========================================================================

    //-------------------------------------------------------------------------
    //! @brief      コンストラクタです.
    //-------------------------------------------------------------------------
    Thread() = default;

    //-------------------------------------------------------------------------
    //! @brief      デストラクタです.
    //-------------------------------------------------------------------------
    ~Thread();

    //-------------------------------------------------------------------------
    //! @brief      スレッドを実行します.
    //-------------------------------------------------------------------------
    void Run(ThreadFunc func, void* user);

    //-------------------------------------------------------------------------
    //! @brief      オブジェクトがスレッドと関連付けられているかチェックします.
    //! 
    //! @return     スレッドと関連付けられている場合は true を返し，そうではない場合は false を返却します.
    //-------------------------------------------------------------------------
    bool Joinable();

    //-------------------------------------------------------------------------
    //! @brief      スレッドが終了するまで待機します.
    //-------------------------------------------------------------------------
    void Join();

private:
    //=========================================================================
    // private variables
    //=========================================================================
    void*           m_Handle    = 0;
    unsigned long   m_Id        = 0;

    //=========================================================================
    // private methods.
    //=========================================================================
    /* NOTHING */
};

} //namespace asdx